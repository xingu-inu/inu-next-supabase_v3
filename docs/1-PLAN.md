# INU - 기획안

> "나를 알아가는 가장 쉬운 방법"

---

## 1. 서비스 개요

### 1.1 기본 정보

| 항목 | 내용 |
| ---- | ---- |
| **서비스명** | INU |
| **의미** | "The You Within" - 자신의 내면을 들여다보고, 알아가는 도구 |
| **한 줄 소개** | 클릭 몇 번으로 목표를 구조화하고, WHY를 파악하여 우선순위를 정하는 자기이해 도구 |
| **핵심 컨셉** | Smart Expand - AI가 추천하는 옵션을 클릭하면서 자연스럽게 목표를 구조화 |

### 1.2 핵심 철학

> **"자신이 왜 이것을 하는지(WHY)를 명확히 아는 사람은, 그렇지 않은 사람보다 꾸준히 실행하고, 스스로 방향을 수정할 수 있다."**

- 목표를 세우기 전에 "왜?"를 먼저 묻는다
- WHY가 같은 목표들은 서로 연결된다
- 연결된 구조를 보면 우선순위가 명확해진다
- **WHY depth 탐색은 선택적 기능** (설정에서 ON/OFF, 기본 OFF)
  - OFF (기본): 1단계 WHY만 표시. 심플하게 유지
  - ON: WHY 노드 내부에서 "왜?" 클릭으로 더 깊이 탐색 가능 **(최대 5단계, 5 Whys 프레임워크 기반)**
- MVP는 **1인용 자기이해 도구**에 집중 (소셜 기능은 Phase 2)

### 1.3 브랜드 메타포: Rising Seal

물개(Seal)가 깊은 바다를 탐험하고, 빛과 함께 수면 위로 떠오른다.

- **Dive**: 내면을 탐색하는 깊은 성찰
- **Rise**: 명확해진 방향과 함께 행동으로

### 1.4 디자인 원칙

| 원칙 | 설명 |
| ---- | ---- |
| **Simplicity** | 클릭 몇 번으로 완성. 복잡한 설정 없음 |
| **Guidance** | AI가 다음 단계를 제안. 막막함 없음 |
| **Clarity** | 목표 구조 트리로 한눈에 파악 |
| **Flow** | 자연스러운 질문 흐름으로 구조화 |

---

## 2. 문제 정의 & 타겟

### 2.1 해결할 문제

> "사람들은 목표는 있지만, 왜 그걸 하고 싶은지 모른다"

| 문제 | 설명 |
| ---- | ---- |
| **목표만 있고 이유가 없음** | "운동해야지" → 왜? → 모름 → 작심삼일 |
| **우선순위를 못 정함** | 하고 싶은 건 많은데 뭐부터 해야 할지 모름 |
| **구조화가 어려움** | 머릿속 생각을 정리하는 방법을 모름 |
| **기존 도구가 복잡함** | 노션, 마인드맵 등은 설정이 너무 많음 |

### 2.2 타겟 유저

> "하고 싶은 것이 많고, 정리하고 싶은 사람"

| 세그먼트 | 특징 | 핵심 니즈 |
| -------- | ---- | --------- |
| **Primary** | 20대 대학생/취준생 | 하고 싶은 것 정리, 방향 찾기 |
| **Secondary** | 20-30대 직장인 | 번아웃 후 방향 재설정, 균형 |
| **Tertiary** | 30-40대 전문직 | 삶 리뷰, 가치 재정렬 |

### 2.3 페르소나: 민서 (22세, 대학생)

**상황**: 하고 싶은 것이 20개 넘게 있지만, 뭐부터 해야 할지 모름. 계획만 세우고 실행이 안 됨.

**Pain Points**:
- "왜 이걸 하고 싶은지" 깊이 생각해본 적 없음
- 노션에 목록만 쌓여있고 정리가 안 됨
- 매주 같은 패턴 반복 (계획 → 실패 → 자책)

**INU 사용 후**:
- "운동하고 싶어" 입력 → AI가 질문 → 클릭클릭 → 구조화 완료
- 트리 뷰에서 "건강"이 왜 중요한지 한눈에 파악
- WHY가 명확해지니 우선순위가 자연스럽게 정해짐

---

## 3. 핵심 기능

### 3.1 Smart Expand (Goal 생성 플로우)

**핵심 아이디어**: 트리 뷰 안에서 직접 Goal 생성. 별도 모달 없이 노드를 클릭하면 아래로 분기하며 구조화 완성. **복수 선택**으로 잘게 쪼개기.

> 와이어프레임 → [S-GOAL (2-WIREFRAMES.md)](2-WIREFRAMES.md)

**특징:**
- 트리 뷰 자체가 Goal 생성 플로우이자 결과 시각화
- 선택할 때마다 노드가 생기고 아래로 분기
- **복수 선택 가능**: 하위 항목, WHY 모두 여러 개 선택 → 잘게 쪼개기
- **복수 선택 시 각각 독립 Goal**: 러닝과 헬스는 별도 Goal 카드, 별도 Phase/Action
- **공유 WHY**: 같은 WHY를 가진 Goal들은 트리에서 자연스럽게 연결
- 여러 카테고리를 병렬로 생성 가능 (동시에 여러 Goal)
- 완성된 Goal은 그대로 트리에 남아 시각화됨

**내부 매핑** (사용자는 의식하지 않음):

| 질문 | 내부 레이어 | 필수 여부 | 복수 선택 |
| ---- | ----------- | --------- | --------- |
| "어떤 것을 시작해볼까요?" | WHAT (카테고리) | 필수 | 단일 |
| "어떤 ~이요?" | WHAT (구체화) | 필수 | ✅ 복수 가능 (각각 독립 Goal). 세분화 유도 — 아래 참조 |
| "왜 하고 싶어?" | WHY | 필수 | ✅ 복수 가능 (Cross-Goal 매핑) |
| "어떻게/얼마나?" | HOW | 선택 (스킵 시 카드/상세에서 HOW 행 숨김) | 단일 |
| "중요도는?" | PRIORITY | 필수 | 단일 |
| "지금 어디쯤이에요?" | STATUS | 필수 | 단일 |
| "어디서?" / "누구와?" | WHERE / WHO | Smart Expand로 이동 | - |

> **복수 선택 시 개수 제한 없음** — 원하는 만큼 선택 가능. UI에서 선택 항목이 많아지면 스크롤/축소 처리.

**Goal 세분화 원칙: "하나의 Goal = 하나의 구체적 활동"**

- Goal은 내부에 여러 종류의 활동이 섞이지 않도록 **충분히 구체적**이어야 한다
- 예: "헬스" → "하체 운동", "등 운동", "어깨 운동"으로 각각 독립 Goal 생성
- **AI 세분화 유도**: WHAT 구체화 단계에서 AI가 "이 목표를 더 나눌 수 있어요"라고 추가 분기를 제안
  - 예: 사용자가 "헬스"를 선택 → AI가 "어떤 부위 운동이요?" → 하체, 등, 어깨 등 옵션 제안
  - 사용자가 원하지 않으면 그대로 진행 (강제 아님)
- **Goal이 많아지는 문제 대응**: 카테고리 필터 + 카드 접기(collapse)로 관리
- Action 내부에 트리 구조를 넣지 않음 — Simplicity 원칙 유지. 세분화는 Goal 레벨에서 해결

### 3.2 카드 뷰 (기본 UI)

메인 화면. 목표별 카드 목록으로 일상적 관리.

> 와이어프레임 → [S-CARD (2-WIREFRAMES.md)](2-WIREFRAMES.md)

**카드 뷰 탭**:

| 탭 | 설명 |
| -- | ---- |
| **활성 Goals** (기본) | 진행 중인 Goal 카드 목록 |
| **아카이브** | 완료된 Goal 목록. muted 스타일. 클릭 시 여정 요약(S-COMPLETE 내용) 확인 |

**Goal 카드 구성요소**:

| 요소 | 설명 |
| ---- | ---- |
| 카테고리 아이콘 + 제목 | 💪 러닝 |
| 중요도 라벨 | 🔴 필수 / ⚪ 선택 (아이콘 + 텍스트) |
| WHY | 왜 하고 싶은지 (복수 가능, · 로 구분) |
| HOW | 어떻게 할 것인지 |
| 진도 | **Phase 기반** (메인: "1/3 단계 · 기초 준비 중") + 퍼센트 바 (보조, 작게) |
| Actions | 구체적 실행 항목 (체크리스트). 🔗 표시된 Action은 다른 Goal에도 연결된 공유 Action |
| 🔗 연결된 목표 | Cross-Goal 매핑 — 어떤 목표에 어떤 항목으로 기여하는지 |
| 확장하기 버튼 | Smart Expand로 추가 구조화 |
| 기록 버튼 | 성찰 노트 작성 (감정 + 자유 텍스트) |
| 일정 버튼 | Google Calendar 연동 |

### 3.3 트리 뷰 (목표 구조 시각화 + Cross-Goal 연결)

목표들 간의 관계를 그래프로 시각화. 큰 그림 파악 + 목표 간 연결고리 확인. **생성 플로우와 동일한 순서** (WHAT → WHY → HOW)로 위에서 아래로 배치.

> 와이어프레임 → [S-TREE (2-WIREFRAMES.md)](2-WIREFRAMES.md)

**트리 레이어 구조** (위 → 아래):

| 레이어 | 역할 | 예시 |
| ------ | ---- | ---- |
| **WHAT (카테고리)** | 최상위. 무엇을 하는가 | 💪 운동 |
| **WHAT (구체화)** | 구체적 목표 | 러닝, 헬스 |
| **WHY** | 왜 하는가. 같은 WHY를 공유하는 Goal들이 여기서 연결됨 | 🎯 건강, 🎯 스트레스 해소 |
| **HOW (Phase/Action)** | 어떻게 하는가. 로드맵 단계와 실행 항목 | 1️⃣ 기초 준비 → 2️⃣ 습관 만들기 |

> WHY가 중간에 위치하여 **위로는 "무엇을" 아래로는 "어떻게"** 를 연결하는 허브 역할. 같은 WHY를 가진 Goal들이 WHY 레이어에서 자연스럽게 합류하며, 아래 HOW 레이어에서 각자의 실행 경로로 분기한다.

**트리 뷰의 가치**:

- 같은 WHY를 공유하는 목표들이 WHY 레이어에서 자연스럽게 연결됨
- **Cross-Goal 점선**으로 목표 간 숨은 연결고리 발견
- "이 둘 중 뭐가 더 중요하지?" → 트리 보면 명확
- WHAT에서 아래로 내려가며 WHY를 거쳐 HOW까지 — 목표의 전체 맥락을 한눈에 파악
- 하나의 활동이 여러 WHY에 기여하는 **임팩트**를 시각적으로 파악

**WHY 노드 내부 확장 (Depth in WHY Node)** — 선택적 기능:

> 설정에서 "WHY 깊이 탐색" ON 시에만 활성화. 기본 OFF.

- **OFF (기본)**: 심플하게 1단계 WHY만 표시
- **ON**: WHY 노드 내부에서 "왜?" 클릭으로 **최대 5단계까지** 탐색 가능 (5 Whys 프레임워크)
  - **depth indicator** 표시 (1/5, 2/5... 5/5) — 현재 깊이를 시각적으로 안내
  - 5단계 도달 시 **"핵심 WHY에 도달했어요"** 안내 메시지 표시
  - 각 단계의 WHY는 부모 WHY에 연결 (`parent_why_id`)
- **ON→OFF 전환 시**: depth 2+ WHY를 UI에서 숨김 (데이터는 유지). ON으로 다시 전환하면 복원

### 3.4 Smart Expand (기존 목표 확장)

이미 만든 Goal 카드에서 [✨ 확장하기] 클릭 → AI가 맥락에 맞는 추가 질문을 제안 (목표 거리, 함께할 사람, 준비물 등).

> 와이어프레임 → [S-EXPAND (2-WIREFRAMES.md)](2-WIREFRAMES.md)

### 3.5 적응형 로드맵 & 코칭 시스템 (Adaptive Roadmap & Coaching)

**철학**: 기간을 묻지 않는다. 사용자의 페이스에 맞춰 AI가 자동으로 적응한다. **전체 로드맵을 공개**하여 큰 그림을 볼 수 있게 하되, 현재 단계에 시각적 강조와 **1:1 코칭 메시지**를 제공한다.

> Cornell 연구 "GAINS & DRAINs" 프레임워크에 따르면, 기간 압박은 "Negative self-efficacy"를 유발할 수 있음. 대신 **단기 목표 달성 하이라이트 + 개인화된 피드백**이 효과적.

**작동 방식:**

1. Goal 생성 시 "지금 어디쯤이에요?"만 질문
2. AI가 현재 상태에 맞는 로드맵을 자동 생성
3. **전체 로드맵을 공개** — 모든 단계의 Action을 보여줌
4. **현재 단계를 시각적으로 강조** + 각 단계마다 코칭 메시지 제공
5. Phase 완료 시 진도 피드백 + 다음 단계 코칭

> 와이어프레임 → [S-DETAIL (2-WIREFRAMES.md)](2-WIREFRAMES.md)

#### 코칭 시스템 (1:1 케어)

각 단계마다 맥락에 맞는 코칭 메시지를 제공하여 **"지금 이게 왜 중요한지"** 이해시키고 동기를 유지한다.

**코칭 메시지 생성 방식**: 하이브리드

| 방식 | 설명 |
| ---- | ---- |
| 규칙 기반 | Phase별 미리 정의된 메시지 템플릿 (빠른 응답) |
| AI 개인화 | Gemini가 사용자의 WHY, 진행 상황, 변경 이력을 반영하여 개인화 |

**코칭 메시지 유형:**

| 유형 | 설명 | 예시 |
| ---- | ---- | ---- |
| 단계 중요도 | 지금 이 단계가 왜 중요한지 | "자기분석은 취업의 기초예요." |
| 큰 그림 연결 | 전체 로드맵에서의 위치 | "여기까지 오면 전체의 75%예요." |
| Cross-Goal 효과 | 다른 목표에도 기여한다는 점 | "이 단계에서 커리어 성장에도 기여해요." |
| 점진적 다음 스텝 | 도달 가능한 다음 행동 제안 | "먼저 강점 3가지만 적어보는 것부터 시작해봐요." |
| WHY 리마인드 | 왜 하고 있는지 상기 | "경제적 독립을 위해 잘 나아가고 있어요." |
| 변경 기반 조언 | 과거 변경 이력 기반 개인화 | "전에 WHY를 바꿨을 때처럼, 방향을 점검해보는 것도 좋아요." |
| 페이스 참조 | 이전 Phase 소요일 기반 | "이전 단계를 10일 만에 완료했어요. 이번도 나의 페이스로." |

**과거 데이터 기반 조건 분기** (규칙 기반, AI 불필요):

| 조건 | 참조 데이터 | 코칭 메시지 예시 |
| ---- | ----------- | ---------------- |
| 최근 성찰 노트가 😣 | goal_journals.mood | "지난번에 힘들다고 했었죠. 작은 것부터 다시 시작해봐요." |
| WHY가 최근 변경됨 | change_history (field='why') | "최근에 방향을 바꿨으니, 새 방향으로 천천히 가봐요." |
| Action 완료율 높음 (≥80%) | actions.completed 집계 | "꾸준히 잘하고 있어요. 이 흐름 유지해봐요." |
| 이전 Phase days_taken 존재 | phases.days_taken | "이전 단계를 N일 만에 완료했어요. 이번도 나의 페이스로." |
| 조건 해당 없음 (기본) | - | Phase별 기본 템플릿 메시지 사용 |

**핵심: 터무니없이 높은 목표가 아닌, 현재 상태에서 도달 가능한 다음 스텝을 안내**

**Phase 완료 시 피드백:**

> 와이어프레임 → [S-PHASE (2-WIREFRAMES.md)](2-WIREFRAMES.md)

- "나의 페이스": 이 단계에 걸린 일수 표시
- **성장 비교**: 이전 Phase 또는 이전 Goal의 유사 Phase와 소요일 비교 (예: "지난 기초 단계보다 3일 빨라졌어요")
  - 비교 대상 없으면 (첫 Phase/Goal) 비교 라인 숨김
  - 구현: 같은 유저의 완료된 phases.days_taken 비교 (단순 쿼리)
- 다음 단계 코칭 메시지 + WHY 리마인드
- [페이스 올리기] 버튼

**핵심 원칙:**

| 원칙 | 설명 |
| ---- | ---- |
| 기간 질문 없음 | 부담 제거, 자기 페이스 존중 |
| 전체 로드맵 공개 | 큰 그림을 보며 지금의 중요성을 이해 |
| 현재 단계 강조 | 지금 집중해야 할 곳을 시각적으로 안내 |
| 단계별 코칭 메시지 | "왜 지금 이게 중요한지" 맥락 제공 |
| 진도 시각화 | 전체에서 내가 어디쯤인지 지속적으로 표시 |
| 완료 시 피드백 | "나의 페이스" 데이터로 자기이해 강화 |
| 점진적 다음 스텝 | 터무니없는 목표 대신 도달 가능한 다음 행동 안내 |
| 선택적 도전 | 원하면 더 빠르게, 아니면 그대로 ([페이스 올리기]) |
| WHY 리마인드 | 단계 완료 시 "왜 하고 있는지" 상기 → 동기부여 |

**[페이스 올리기] 동작 정의:**

- Phase 완료 피드백(S-PHASE)에서 [페이스 올리기] 클릭 시:
  - MVP (규칙 기반): 다음 Phase에 보너스 Action 1~2개 추가 제안, 또는 다음 Phase의 Action을 현재 Phase로 당겨오기 제안
  - 제안을 사용자가 승인/거절 → 승인 시 Action 추가 및 Phase 구조 반영
  - P1 (AI): Gemini가 맥락에 맞는 도전 과제 생성

**Goal 완료 시 피드백** (모든 Phase 완료):

> 와이어프레임 → [S-COMPLETE (2-WIREFRAMES.md)](2-WIREFRAMES.md)

- Goal 완료 시 **아카이브** 처리 (카드 뷰에서 분리, 아카이브 탭에서 열람)
- **나의 여정 요약**으로 자기이해 데이터 제공 (총 소요일, 단계별 소요, 성찰 노트 수, 감정 흐름)
- **WHY 기반 다음 Goal 추천**: 가장 활발했던 WHY (성찰 노트 수 + 감정 긍정 비율) 기반으로 추천
  - 연결된 Cross-Goal 중 미시작 Goal 우선 추천
  - 추천 대상 없으면 새 Goal 생성 유도
  - 구현: goal_journals + goal_whys 테이블 집계 (AI 불필요)

### 3.6 캘린더 뷰

Action 일정을 주간/월간으로 시각화. 카드/트리와 함께 3번째 뷰 탭.

- 카드 뷰, 트리 뷰와 동일한 데이터의 시간축 시각화
- 날짜가 설정된 Action을 캘린더에 표시
- Google Calendar 연동으로 외부 내보내기도 지원
- MVP에서는 P1 (카드/트리 먼저)

### 3.7 AI 추천 (Gemini 3)

| 기능 | 설명 |
| ---- | ---- |
| **옵션 추천** | 목표 입력 시 관련 하위 옵션 추천 |
| **WHY 추천** | 목표에 맞는 이유/동기 추천 |
| **Action 생성** | 목표 달성을 위한 구체적 행동 자동 생성 |
| **확장 제안** | 기존 목표를 더 구체화할 수 있는 질문 제안 |

**구현 방식**: 규칙 기반 + Gemini 3 하이브리드
- 규칙 기반: 카테고리별 미리 정의된 옵션 풀 (빠른 응답)
- Gemini 3: 맥락에 맞는 동적 추천 (개인화)
- 호출 경로: Next.js Server Action → Gemini 3 API (API Key는 환경변수, 클라이언트 노출 없음)

**AI Fallback (장애 대응)**:

| 상황 | 대응 |
| ---- | ---- |
| API 호출 중 | 옵션 카드에 skeleton shimmer 로딩 표시 |
| 타임아웃 (5초) | 규칙 기반 옵션 풀로 자동 전환 |
| API 에러 | "AI 추천을 불러오지 못했어요" 안내 + 규칙 기반 옵션 표시 |
| 규칙 기반 기본 동작 | 카테고리별 미리 정의된 옵션 풀에서 표시 (항상 작동) |
| **MVP (AI P1)** | **고정 옵션 풀만 사용** — WHAT: §2-WIREFRAMES 카테고리별 고정 WHAT 옵션, WHY: §6.3, Phase/Action: §6.4 + [PHASE-TEMPLATES.md](data/PHASE-TEMPLATES.md) |

### 3.8 변경 이력 추적 (Change History)

Goal의 속성(WHY, 카테고리, 빈도 등)을 나중에 바꿀 때 **"왜 바꾸나요?"** 질문 → 변경 이유 기록.

> 와이어프레임 → [S-CHANGE, S-DETAIL 변경 이력 탭 (2-WIREFRAMES.md)](2-WIREFRAMES.md)

**자기이해 가치:**

| 가치 | 설명 |
| ---- | ---- |
| WHY 변화 추적 | "원래 건강 때문이었는데, 결국 스트레스 해소가 진짜 이유였구나" |
| 패턴 발견 | "나는 항상 2주 후에 이유가 바뀌네" |
| 장기 데이터 | 자기이해의 깊이를 위한 장기적 데이터 축적 |

### 3.9 Cross-Goal 매핑 (Goal Impact Map)

**핵심 아이디어**: 하나의 활동이 여러 목표에 기여하는 관계를 시각화. "내가 이걸 하면 어떤 목표들이 동시에 앞으로 나아가는지" 한눈에 파악.

**연결 생성 방식**: 하이브리드

| 방식 | 설명 |
| ---- | ---- |
| 자동 연결 | 같은 WHY를 가진 Goal들은 자동으로 연결 |
| AI 추천 | Gemini가 기존 Goal들과의 연결점을 추천 |
| 사용자 승인 | 추천된 연결을 사용자가 승인/거절/수정 가능 |

**작동 방식:**

1. Goal 생성 시 복수 WHY 선택 → 자동으로 Cross-Goal 연결 생성
2. AI가 기존 Goal들과의 연결점을 추천 → 사용자가 승인/거절
3. Goal 카드와 트리 뷰에서 연결된 목표들을 표시

> 와이어프레임 → [S-DETAIL, S-TREE (2-WIREFRAMES.md)](2-WIREFRAMES.md)

**Cross-Goal 연결 유형:**

| 유형 | 설명 | 예시 |
| ---- | ---- | ---- |
| 공유 WHY | 같은 WHY를 가진 Goal들 | 러닝 + 식단 → WHY: 건강 |
| **공유 Action** | **하나의 Action이 여러 Goal의 Phase에 동시 연결** | **Java 공부 → 취업준비 1단계 + 오픈소스 기여 2단계** |
| 활동 기여 | 하나의 활동이 다른 목표에도 기여 | Spring 공부 → 취업 준비의 "기술 면접 대비"에 기여 |
| 습관 연쇄 | 한 습관이 다른 습관의 기반 | 아침 기상 → 러닝 → 집중력 → 공부 |

**공유 Action 동작 방식:**

- 하나의 Action(예: "Java Spring 공부")이 여러 Goal의 Phase에 동시 연결 가능
- 한쪽에서 체크 → 양쪽 모두 완료 처리 → 양쪽 진행도 반영
- 🔗 아이콘으로 다른 Goal에도 연결된 Action임을 표시

**공유 Action 생성 방식 (MVP):**

- **자동 감지**: 새 Action 추가 시 같은 제목의 기존 Action이 있으면 "이미 '취업 준비'에 같은 Action이 있어요. 연결할까요?" 제안 (문자열 매칭)
- 사용자가 승인 시 기존 Action에 연결, 거절 시 독립 Action으로 생성
- AI 기반 유사 Action 추천은 P1에서 추가

> 와이어프레임 → [2-WIREFRAMES.md § 공유 Action](2-WIREFRAMES.md)

**Cross-Goal 매핑의 가치:**

| 가치 | 설명 |
| ---- | ---- |
| **동기부여** | "이 하나를 하면 3개 목표가 동시에 나아가요" |
| **우선순위** | 더 많은 목표에 기여하는 활동이 자연스럽게 높은 우선순위 |
| **효율성** | 겹치는 활동을 발견하여 시간 절약 |
| **자기이해** | "내 목표들이 이렇게 연결되어 있구나" → 깊은 이해 |

### 3.10 성찰 노트 (Goal Journal)

**핵심 아이디어**: 각 Goal마다 일기처럼 기록. "지금 어떤 상황이고, 어떻게 느끼는지"를 남겨 자기이해의 질적 데이터를 축적.

> Change History = "뭘 바꿨는지" (구조적 변화)
> 성찰 노트 = "어떻게 느꼈는지" (감정/상황 변화)
> 둘이 합쳐져서 → "나는 왜 그때 그걸 바꿨는지" 맥락 완성

**진입점 2가지** (기록하기 vs 되돌아보기):

| 진입점 | 위치 | 용도 |
| ------ | ---- | ---- |
| Goal 카드 [📝 기록] | 카드 뷰 각 Goal 카드 | **이 Goal에 대한** 성찰 기록 (S-JOURNAL 모달) |
| 헤더 📝 아이콘 | 글로벌 헤더 (항상 노출) | **전체 Goal 통합** 성찰 관리 (S-JRNL 전용 페이지) |

> 진입점은 2개, 데이터는 하나(goal_journals 테이블). Goal 카드 📝는 "특정 Goal 기록", 헤더 📝는 "전체 성찰 관리(기록+되돌아보기)".

**작성 흐름 A: Goal 카드에서** (클릭 몇 번 + 선택적 글쓰기):

1. Goal 카드에서 [📝 기록] 클릭
2. 감정/상황 선택 (필수, 단일): 😊 잘되고있어 / 😐 보통 / 😣 힘들어 / 🔥 의욕넘침
3. 자유 텍스트 (선택)
4. 저장 → 현재 Phase에 자동 연결 + 타임스탬프

> 와이어프레임 → [S-JOURNAL (2-WIREFRAMES.md)](2-WIREFRAMES.md)

**작성 흐름 B: 전용 성찰 페이지에서** (헤더 📝 클릭):

1. 헤더의 📝 아이콘 클릭 → /journal 전용 페이지
2. "오늘의 기분" 퀵 기록: Goal 선택 드롭다운 → 감정 클릭 → 자유 텍스트(선택) → 인라인 저장
3. 감정 흐름 차트로 최근 2주 감정 패턴 확인 (Goal별 색상 구분)
4. 통합 타임라인에서 모든 Goal의 성찰 노트 시간순 열람 (Goal 필터 가능)

> 와이어프레임 → [S-JRNL (2-WIREFRAMES.md)](2-WIREFRAMES.md)

**전용 성찰 페이지 (S-JRNL) 구성:**

| 영역 | 설명 |
| ---- | ---- |
| **오늘의 기분** (퀵 기록) | Goal 선택 + 감정 4종 + 자유 텍스트. 인라인 저장 |
| **감정 흐름 차트** | 최근 2주 dot chart. Goal별 카테고리 색상 구분. Y축: 감정 4종, X축: 날짜 |
| **통합 타임라인** | 모든 Goal의 성찰 노트를 시간순으로 표시. Goal 필터 탭(전체/💪/📚 등) |

**헤더 📝 미기록 넛지:**

- 오늘 성찰 기록이 없으면 📝 아이콘 옆에 작은 dot(●) 표시
- 기록 완료 시 dot 사라짐
- Push 알림은 하지 않음 (Calm 원칙)

**자기이해 가치:**

| 가치 | 설명 |
| ---- | ---- |
| 감정 기록 | "나는 이 목표를 할 때 어떤 감정이었는지" 축적 |
| Phase별 맥락 | 어떤 단계에서 힘들었고, 어떤 단계에서 즐거웠는지 |
| Change History 보완 | WHY 변경 시점의 감정 맥락 확인 가능 |
| 감정 흐름 시각화 | 전용 페이지 차트로 최근 2주 감정 패턴을 한눈에 파악 |
| 장기 패턴 (Phase 2) | AI가 감정 흐름 분석: "러닝은 항상 🔥로 시작해서 😐로 가네요" |

> **MVP**: 기록 + 타임라인 표시 + 전용 성찰 페이지(감정 흐름 차트, 통합 타임라인). AI 감정 패턴 분석은 Phase 2.

### 3.11 데이터 활용: 인사이트 (Past → Future Flow)

**핵심 아이디어**: 쌓인 과거 데이터(성찰 노트, 변경 이력, Phase 소요일, Action 완료율)를 미래 행동에 연결하여 자기이해를 강화한다. MVP에서는 **단순 DB 집계(COUNT, AVG)로 구현** 가능한 범위만 포함.

**Goal 상세 인사이트 (S-DETAIL [정보] 탭)**:

> 와이어프레임 → [S-DETAIL (2-WIREFRAMES.md)](2-WIREFRAMES.md)

| 항목 | 데이터 소스 | 표시 예시 |
| ---- | ----------- | --------- |
| 평균 Phase 소요 | phases.days_taken AVG | "평균 Phase 소요: 12일" |
| 성찰 노트 감정 집계 | goal_journals.mood COUNT | "성찰 노트: 8개 (🔥 3 · 😊 3 · 😐 1 · 😣 1)" |
| WHY 변경 횟수 | change_history WHERE field='why' COUNT | "WHY 변경: 1회" |

- Goal에 데이터가 충분히 쌓이지 않았으면 (예: Phase 0개 완료) 인사이트 섹션 숨김
- 구현: 실시간 집계 쿼리. 별도 테이블 불필요

**데이터 활용 전체 맵:**

```text
[과거 데이터]              [활용 경로]                    [사용자가 보는 곳]
──────────────────────────────────────────────────────────────────────
Phase 소요일         →  다음 Phase 코칭 메시지에 반영  →  S-CARD 코칭 메시지
                     →  Phase 완료 시 성장 비교        →  S-PHASE
                     →  Goal 상세 인사이트             →  S-DETAIL

성찰 노트 감정       →  성찰 페이지 감정 흐름 차트       →  S-JRNL
                     →  성찰 페이지 통합 타임라인       →  S-JRNL
                     →  코칭 메시지 조건 분기          →  S-CARD 코칭 메시지
                     →  Goal 상세 인사이트 (감정 집계) →  S-DETAIL
                     →  Goal 완료 시 감정 흐름 요약    →  S-COMPLETE

변경 이력            →  코칭 메시지 조건 분기          →  S-CARD 코칭 메시지
                     →  Goal 상세 인사이트 (변경 횟수) →  S-DETAIL

Action 완료율        →  코칭 메시지 조건 분기          →  S-CARD 코칭 메시지

Cross-Goal 데이터    →  Goal 완료 시 다음 Goal 추천    →  S-COMPLETE
```

---

## 4. 사용자 흐름

### 4.1 온보딩 플로우 (간소화)

```
1. 랜딩 페이지
   │  "나를 알아가는 가장 쉬운 방법" + [시작하기]
   ▼
2. 로그인 (Google OAuth via Supabase Auth)
   ▼
3. Welcome 모달
   │  "먼저 하나만 만들어볼까요?"  ← 1개 권장 (강제 아님)
   ▼
4. Goal 생성 플로우 (트리 뷰 인라인 Smart Expand)
   │  트리 뷰에서 클릭클릭 → 첫 Goal 완성
   ▼
5. 트리 뷰에 머무름
   │  완성된 트리를 확인한 후 사용자가 직접 카드 뷰 탭으로 이동
   │  이후 자유롭게 Goal 추가 가능 (카드 뷰 또는 트리 뷰에서)
```

- **핵심**: 바로 Goal 생성으로 진입
- **1개 권장**: 첫 Goal은 1개로 시작 유도 (압도감 방지, 강제는 아님)
- **Goal 생성 위치**: 트리 뷰 인라인에서 생성 → 완료 후 트리 뷰에 머무름 (사용자가 직접 카드 뷰로 이동)
- **온보딩 중 이탈 방지**: Goal 생성 진행 중 뷰 탭 클릭 시 확인 모달 ("Goal을 만들고 있었어요. 그만둘까요?")
- **제거**: Brain Dump, 카테고리 분류 등 복잡한 온보딩

### 4.2 Goal 생성 플로우 (트리 뷰 인라인)

> 와이어프레임 → [S-GOAL (2-WIREFRAMES.md)](2-WIREFRAMES.md)

- **Goal 생성은 항상 트리 뷰에서만 이루어짐** (일관성 유지)
- 카드 뷰 [+ 새 목표 추가] 클릭 → 트리 뷰로 전환 후 인라인 생성 플로우 진입
- 복수 선택 시 각각 독립 Goal 카드로 생성 (러닝, 헬스 별도)
- WHY가 같은 Goal들은 트리 뷰에서 같은 WHY 노드 아래 연결
- 완성된 Goal은 트리에 노드로 남음
- 여러 Goal을 병렬로 생성 가능
- 기존 WHY 노드 아래 새 Goal 추가도 가능
- **고정 옵션 풀**: WHAT 옵션 → [WHAT-OPTIONS.md](data/WHAT-OPTIONS.md), WHY 옵션 → [WHY-OPTIONS.md](data/WHY-OPTIONS.md)
- **Phase/Action 자동 생성**: 규칙 기반 템플릿 → [PHASE-TEMPLATES.md](data/PHASE-TEMPLATES.md)

### 4.3 Goal 편집 플로우

> 와이어프레임 → [S-DETAIL 편집 모드 (2-WIREFRAMES.md)](2-WIREFRAMES.md)

- S-DETAIL에서 [편집] 클릭 → 인라인 편집 모드 진입
  - WHY: 태그 형태로 추가/삭제 가능
  - HOW: 인라인 텍스트 입력
  - 중요도: 라디오 선택 (필수/선택)
- **변경 이력 자동 트리거**: WHY, 카테고리, 중요도 변경 시 → 변경 이력 모달(S-CHANGE) 자동 열림 → "왜 바꾸나요?" 질문
- [저장] / [취소] 버튼 노출
- 저장 완료 시 Toast 알림 ("변경사항이 저장되었어요")

### 4.4 Action 추가/편집/삭제 플로우

> 와이어프레임 → [S-DETAIL Action 편집 (2-WIREFRAMES.md)](2-WIREFRAMES.md)

- [+ Action 추가] 클릭 → 현재 Phase 내에 인라인 텍스트 입력 필드 등장
- Enter로 저장, Esc로 취소
- 기존 Action: 텍스트 클릭 → 인라인 편집 모드
- 삭제: 호버 시 삭제 아이콘(🗑️) 표시 → 클릭 시 확인 후 삭제
- 공유 Action 삭제 시: "이 Action은 다른 Goal에서도 사용 중이에요. 이 Goal에서만 연결을 해제할까요?" 확인

### 4.5 Goal 삭제 플로우

- S-DETAIL에서 [🗑️ 삭제] 클릭 → 확인 모달
  - "정말 삭제할까요? 이 목표의 모든 기록이 사라져요."
  - 공유 Action이 있는 경우: "이 목표만 삭제돼요. 공유된 Action은 다른 목표에서 유지돼요."
  - [삭제] / [취소] 버튼
- 삭제 완료 시 Toast 알림 + 카드 뷰로 복귀

### 4.6 일상 사용 플로우

```text
[메인 화면 - 카드 뷰]
        │
        ├── Goal 카드 클릭 → S-DETAIL 모달 열기 (상세/편집)
        │    (Actions 체크박스 클릭 → 체크 토글만, S-DETAIL 열리지 않음)
        │
        ├── Goal 카드 확인
        │    ├── 현재 Phase의 Action 체크/완료
        │    ├── Phase 기반 진도로 현재 단계 확인
        │    └── 모든 Action 완료 시 → Phase 완료 피드백
        │         ├── "나의 페이스" 데이터 확인
        │         ├── 코칭 메시지로 다음 단계 안내
        │         └── [페이스 올리기] → AI가 더 도전적 일정 제안
        │
        ├── [+ 새 목표 추가] 클릭
        │    └── 트리 뷰로 전환 → 인라인 Goal 생성 플로우 진입
        │
        ├── [✨ 확장하기] 클릭
        │    └── 추가 질문에 답하며 구조 확장
        │
        ├── [📝 기록] 클릭
        │    └── 감정 선택 + 자유 텍스트 → 성찰 노트 저장
        │
        ├── [🔗 연결된 목표] 확인
        │    └── 이 활동이 기여하는 다른 목표들과 연결 항목 확인
        │
        ├── [⋯] 더보기
        │    └── 드롭다운: 삭제/편집 등 빠른 액션
        │
        ├── [🌳 트리] 뷰 전환
        │    └── 목표 구조 전체 파악 (WHAT → WHY → HOW)
        │    └── Cross-Goal 점선 연결로 목표 간 관계 파악
        │    └── Phase 진행 상황 시각화
        │
        └── [📅 일정] 클릭
             └── Google Calendar에 Action 추가
```

### 4.7 뷰 전환 흐름

```
┌───────────────────────────────────────────────────────────┐
│  [📋 카드 뷰]  ←→  [🌳 트리 뷰]  ←→  [📅 캘린더 뷰]      │
│                                                           │
│  카드 뷰: 개별 목표 관리, Action 체크                      │
│  트리 뷰: 목표 구조 전체 파악 + Goal 생성                   │
│  캘린더 뷰: Action 일정을 주간/월간 시각화 (P1)            │
└───────────────────────────────────────────────────────────┘

전환: 상단 탭 클릭 → 부드러운 애니메이션 전환
데이터: 동일한 데이터, 다른 시각화
```

---

## 5. 정보 구조 (IA)

### 5.1 화면 목록

| Screen ID | 화면명 | 유형 | 설명 |
| --------- | ------ | ---- | ---- |
| S-LND | 랜딩 | Page | 비로그인 유저 대상 서비스 소개 |
| S-AUTH | 로그인 | Page | Google OAuth |
| S-WEL | Welcome | Modal (Full) | 첫 방문 유저 환영 + Goal 생성 시작 |
| S-GOAL | Goal 생성 | 트리 뷰 인라인 | 트리 뷰 안에서 직접 Goal 생성 |
| S-CARD | 메인 - 카드 뷰 | Page (Default) | Goal 카드 목록 (기본 화면, 아카이브 탭 포함) |
| S-TREE | 메인 - 트리 뷰 | Page | 목표 구조 트리 시각화 + Goal 생성 |
| S-CAL | 메인 - 캘린더 뷰 | Page (P1) | Action 일정 시각화 |
| S-DETAIL | Goal 상세 | Modal | Goal 편집/상세 + 성찰 노트 탭 + Cross-Goal |
| S-EXPAND | 확장하기 | Modal | Smart Expand 추가 질문 |
| S-PHASE | Phase 완료 | Modal | Phase 피드백 + 다음 단계 코칭 |
| S-CHANGE | 변경 이력 | Modal | 속성 변경 시 이유 기록 |
| S-JRNL | 성찰 페이지 | Page | 성찰 기록 + 감정 흐름 차트 + 통합 타임라인 (헤더 📝으로 접근) |
| S-JOURNAL | 성찰 노트 작성 | Modal | 감정 선택 + 자유 텍스트 기록 (Goal 카드 📝으로 접근) |
| S-COMPLETE | Goal 완료 | Modal | 여정 요약 + 아카이브 |
| S-SET | 설정 | Page | 프로필, 계정 관리, WHY 깊이 탐색 ON/OFF |
| S-404 | 에러 | Page | 페이지 없음 |

### 5.2 사이트맵

```
INU
│
├── 비인증 영역
│   ├── S-LND  랜딩 페이지
│   └── S-AUTH 로그인
│
├── 온보딩 (첫 방문 시)
│   ├── S-WEL  Welcome
│   └── S-GOAL Goal 생성 플로우
│
├── 메인 (인증 후 기본 진입점)
│   ├── S-CARD 카드 뷰 ← 기본 화면
│   ├── S-TREE 트리 뷰 (+ Goal 인라인 생성)
│   ├── S-CAL  캘린더 뷰 (P1)
│   ├── S-JRNL 성찰 페이지 (📝 헤더 아이콘으로 접근)
│   ├── [모달] S-DETAIL Goal 상세/편집
│   └── [모달] S-EXPAND 확장하기
│
├── 공통
│   └── S-SET 설정
│
└── 에러
    └── S-404 페이지 없음
```

### 5.3 네비게이션

- **Logo** (🦭 INU): 클릭 → 메인 화면 (카드 뷰)
- **뷰 탭**: [📋 카드] [🌳 트리] [📅 캘린더] 전환
- **📝 성찰 아이콘**: 클릭 → 성찰 페이지 (/journal). 오늘 미기록 시 dot(●) 넛지 표시
- **User Avatar**: 클릭 → 설정/로그아웃 드롭다운

> 와이어프레임 → [2-WIREFRAMES.md](2-WIREFRAMES.md) 각 화면 참조

### 5.4 URL 구조

| Screen | URL |
| ------ | --- |
| S-LND | `/` (비인증) |
| S-AUTH | `/auth` |
| S-CARD | `/` (인증 후 기본) |
| S-TREE | `/tree` |
| S-CAL | `/calendar` |
| S-JRNL | `/journal` |
| S-SET | `/settings` |

> **동일 URL 처리**: `/`는 인증 상태에 따라 다른 화면을 렌더링
> - 비인증: 랜딩 페이지 (S-LND)
> - 인증: 카드 뷰 (S-CARD)
> - 구현: Next.js 미들웨어 또는 서버 컴포넌트에서 인증 체크 후 분기
>
> 모달(S-WEL, S-GOAL, S-DETAIL, S-EXPAND)은 URL 없이 상태로 관리

---

## 6. 카테고리 시스템

### 6.1 카테고리 목록

> 고정 9개 카테고리. 커스텀 카테고리 생성 불가 — Simplicity 원칙 유지 + AI 추천 품질 보장.

| 카테고리 | 아이콘 | 색상 | Hex |
| -------- | ------ | ---- | --- |
| 운동 | 💪 | Sea Foam | `#5C9E9E` |
| 공부 | 📚 | Amber Sand | `#C9A86C` |
| 취업 | 💼 | Slate Blue | `#5E7B8B` |
| 재테크 | 💰 | Terracotta | `#B87C6B` |
| 관계 | 💕 | Dusty Violet | `#7B6B8D` |
| 취미 | 🎨 | Sage | `#6B9B7A` |
| 습관 | 🧘 | Soft Blue Grey | `#8FA3B0` |
| 독서 | 📖 | Warm Sand | `#A68B5B` |
| 기타 | ✨ | Muted Lavender Grey | `#9B9EB0` |

### 6.2 중요도 (Priority)

| 유형 | 표시 | 의미 |
| ---- | ---- | ---- |
| 필수 (Essential) | 🔴 / solid border | 꼭 해야 하는 것 |
| 선택 (Optional) | ⚪ / dashed border | 하면 좋은 것 |

### 6.3 WHY 고정 옵션 (카테고리별)

> Goal 생성 Step 3 "왜 ~를 하고 싶으세요?" 단계에서 표시되는 고정 옵션. AI 추천(P1)과 별도로, MVP에서 항상 표시.

| 카테고리 | 고정 WHY 옵션 |
| -------- | ------------- |
| 💪 운동 | 건강 유지, 체력 향상, 다이어트, 스트레스 해소 |
| 📚 공부 | 성적 향상, 자기계발, 시험 준비, 커리어 성장 |
| 💼 취업 | 경제적 독립, 커리어 성장, 자아실현, 안정적 생활 |
| 💰 재테크 | 경제적 독립, 노후 준비, 목표 자금 마련, 재정 안정 |
| 💕 관계 | 소속감, 정서적 안정, 사회적 성장, 외로움 해소 |
| 🎨 취미 | 스트레스 해소, 자기표현, 성취감, 새로운 경험 |
| 🧘 습관 | 자기관리, 건강 유지, 생산성 향상, 마음의 안정 |
| 📖 독서 | 지식 확장, 사고력 향상, 영감, 휴식 |
| ✨ 기타 | (고정 옵션 없음, 직접 입력만) |

> 카테고리 간 WHY 중복은 의도적 — Cross-Goal 연결의 자연스러운 시작점. 같은 WHY를 여러 카테고리에서 선택하면 자동으로 같은 WHY 노드에 연결됨.

### 6.4 Phase/Action 규칙 기반 템플릿

> 카테고리 + WHAT 조합별 3개 Phase 템플릿 (각 Phase에 Actions 3개 + 코칭 메시지 1개).
> 상세 템플릿 → [PHASE-TEMPLATES.md](data/PHASE-TEMPLATES.md)

**Status 매핑 규칙:**

| Status | 시작 Phase | 생성되는 Phase |
| ------ | ---------- | -------------- |
| `just_starting` (이제 시작할래요) | Phase 1 | 1, 2, 3 모두 생성 |
| `some_experience` (조금 해봤어요) | Phase 2 | 2, 3만 생성 |
| `actively_doing` (열심히 하는 중) | Phase 3 | 3만 생성 |

- 고정 WHAT 옵션: 카테고리별 전용 템플릿 (32개)
- 직접 입력 WHAT / ✨ 기타: 범용 템플릿 (시작하기 → 실천하기 → 발전하기)

---

## 7. 기술 스택

### 7.1 Frontend

| 기술 | 버전 | 용도 |
| ---- | ---- | ---- |
| Next.js (App Router) | 15.x | React SSR/SSG |
| React | 19.x | UI Library |
| Tailwind CSS | 4.x | Styling |
| Zustand | 5.x | State Management |
| React Flow 또는 D3.js | - | 트리 뷰 시각화 (Cross-Goal 점선 포함) |

### 7.2 Backend (Supabase + Next.js)

| 기술 | 용도 |
| ---- | ---- |
| Supabase | BaaS (Database, Auth, Realtime) |
| Supabase Auth | 인증 (Google OAuth 내장, Session 관리) |
| Supabase Database | 호스팅 PostgreSQL + Row Level Security (RLS) |
| @supabase/ssr | Next.js 서버 컴포넌트용 Supabase 클라이언트 |
| Next.js Server Actions | API 엔드포인트 대체 (데이터 Mutation) |
| Next.js Route Handlers | 외부 API 통신 (Gemini, Google Calendar) |

### 7.3 External Services

| 서비스 | 용도 | 호출 방식 |
| ------ | ---- | --------- |
| Gemini 3 API (Flash/Pro) | AI 추천 (Smart Expand) | Next.js Server Action / Route Handler |
| Google Calendar API | 일정 연동 | Next.js Route Handler |
| Google OAuth | 로그인 | Supabase Auth 내장 |

---

## 8. 데이터 구조 (Supabase PostgreSQL)

> 상세 스키마 (SQL, RLS 정책 등)는 별도 기술 문서에서 정의. 여기서는 테이블 구조만 간략히 정리.

### 8.1 ER 다이어그램

```text
auth.users (Supabase 내장)
  └── profiles (1:1)
        ├── actions (1:N, 독립 엔티티)
        └── goals (1:N)
              ├── goal_whys (N:M) ─── whys (self-ref: parent_why_id, max depth 5)
              ├── phases (1:N)
              │     └── phase_actions (N:M) ─── actions
              ├── cross_goal_links (N:M self-ref)
              │     └── cross_goal_connections (1:N)
              ├── change_history (1:N)
              └── goal_journals (1:N)

* actions는 user에 직접 속하는 독립 엔티티
* 하나의 Action이 여러 Phase에 연결 가능 (공유 Action)
* Action 완료 체크 → 해당 Action을 참조하는 모든 Phase에서 진행도 반영
```

### 8.2 테이블 목록

| 테이블 | 설명 | 주요 컬럼 |
| ------ | ---- | --------- |
| **profiles** | 사용자 프로필 (auth.users 확장) | id (FK→auth.users), display_name, avatar_url, onboarding_completed |
| **goals** | 목표 | user_id, title, category, how, priority, current_status, current_phase, display_order |
| **whys** | 공유 WHY 엔티티 (5 Whys 계층 지원) | user_id, label (UNIQUE per user), parent_why_id (FK→whys, nullable), depth (1~5, default 1) |
| **goal_whys** | Goal↔WHY 다대다 연결 | goal_id, why_id |
| **phases** | 로드맵 단계 | goal_id, phase_order, title, status, coaching_message, started_at, completed_at, days_taken |
| **actions** | 실행 항목 (독립 엔티티, 공유 가능) | user_id, title, completed, completed_at |
| **phase_actions** | Phase↔Action N:M 연결 | phase_id, action_id, display_order |
| **cross_goal_links** | 목표 간 연결 | source_goal_id, target_goal_id |
| **cross_goal_connections** | 연결 상세 | link_id, label, description |
| **change_history** | 변경 이력 | goal_id, field, old_value, new_value, reason, changed_at |
| **goal_journals** | 성찰 노트 | goal_id, phase_id(nullable), mood, content(nullable), created_at |

- 모든 테이블: UUID PK, created_at/updated_at 포함
- 모든 테이블: RLS 활성화 (사용자 본인 데이터만 접근)
- `whys`를 별도 테이블로 분리하여 Cross-Goal 매핑 ("같은 WHY 공유 Goal" 쿼리) 지원
- `days_taken`을 `phases`에 포함하여 별도 pace_data 불필요
- `actions`는 `user`에 직접 속하는 독립 엔티티. `phase_actions`로 여러 Phase에 연결 가능 (공유 Action)
- 공유 Action 완료 시 → 해당 Action을 참조하는 모든 Phase에서 진행도 자동 반영

### 8.3 Phase 상태 전이

```text
upcoming → in_progress → completed
   │                        │
   │  이전 Phase 완료 시     │  모든 Action 완료 시
   └────────────────────────┘

* 모든 Phase는 처음부터 공개 (잠금 없음)
* upcoming: 아직 시작하지 않은 단계 (내용은 보이되 시각적으로 muted)
* in_progress: 현재 활성 단계 (시각적 강조 + 코칭 메시지)
* completed: 완료된 단계 (완료 표시)
```

### 8.4 현재 상태 (Status) 옵션

| 상태 | 설명 | 적용 |
| ---- | ---- | ---- |
| just_starting | 이제 시작할래요 | AI가 기초 단계부터 로드맵 생성 |
| some_experience | 조금 해봤어요 | AI가 중간 단계부터 로드맵 생성 |
| actively_doing | 열심히 하는 중 | AI가 심화 단계부터 로드맵 생성 |

---

## 9. MVP 범위

### 9.0 우선순위 정의

| 우선순위 | 의미 | 설명 |
| -------- | ---- | ---- |
| **P0** | Must Have | MVP 출시에 반드시 필요. 이 기능 없이는 핵심 가치 전달 불가 |
| **P1** | Should Have | MVP에 포함되지만 P0 이후 개발. 사용자 경험 향상에 중요 |

### 9.1 MVP 포함

| 기능 | 우선순위 |
| ---- | -------- |
| 트리 뷰 인라인 Goal 생성 (Smart Expand) | P0 |
| 카드 뷰 (메인 UI) | P0 |
| 트리 뷰 (목표 구조 시각화 + Goal 생성) | P0 |
| Smart Expand (목표 확장) | P0 |
| 적응형 로드맵 (전체 공개 + 코칭 메시지) | P0 |
| Phase 완료 피드백 ("나의 페이스") | P0 |
| 변경 이력 추적 (Change History) | P0 |
| Actions 관리 (체크리스트) | P0 |
| 카테고리 & 중요도 | P0 |
| Google OAuth 로그인 | P0 |
| 복수 WHY 선택 | P0 |
| Cross-Goal 매핑 (Goal 카드 내 연결 표시) | P0 |
| 성찰 노트 (기록 + 타임라인) | P0 |
| Goal 완료 피드백 (여정 요약 + 아카이브) | P0 |
| Goal 상세 인사이트 (Past → Future 데이터 집계) | P0 |
| Phase 완료 성장 비교 | P0 |
| 코칭 메시지 과거 데이터 조건 분기 | P0 |
| Goal 완료 시 WHY 기반 다음 Goal 추천 | P0 |
| 아카이브 탭 (카드 뷰) | P0 |
| 성찰 전용 페이지 (S-JRNL: 감정 흐름 차트 + 통합 타임라인) | P0 |
| 헤더 📝 성찰 진입점 (미기록 넛지 dot 포함) | P0 |
| Goal 편집 플로우 (인라인 편집 + 변경 이력 트리거) | P0 |
| Action 추가/편집/삭제 | P0 |
| Goal 삭제 확인 플로우 | P0 |
| Cross-Goal 트리 시각화 (점선 연결) | P1 |
| 캘린더 뷰 | P1 |
| Google Calendar 연동 | P1 |
| AI 추천 (Gemini 3) | P1 |

### 9.2 MVP 제외 (Phase 2)

| 기능 | 제외 이유 |
| ---- | --------- |
| 시간 분배 추천 | Cross-Goal 매핑 데이터 축적 후, 목표 간 시간 배분 AI 추천 |
| 주간 스냅샷 비교 | 데이터 축적 후 |
| 패턴 분석 | 데이터 축적 후 |
| AI 감정 패턴 분석 | 성찰 노트 데이터 축적 후, 감정 흐름 분석 및 코칭 개인화 |
| Seal 성장 시스템 | 핵심 검증 후 |
| 소셜/커뮤니티 (관계성) | MVP는 1인용 자기이해 도구에 집중. 핵심 검증 후 추가 |
| Identity 탐구 | "어떤 사람이 되고 싶나요?" — WHY 시스템과 연계하여 탐구의 시간으로 추가 |
| 모바일 앱 | 웹 우선 |

---

## 10. 화면 설계

> 화면 설계(와이어프레임)는 [2-WIREFRAMES.md](2-WIREFRAMES.md) 참조

---

*문서 버전: v6.3*
*최종 수정: 2026년 1월 31일*
*v6.3 변경: 흐름 수정 — 카드 뷰 [+ 새 목표 추가] → 트리 뷰 전환 명시, 온보딩 후 트리 뷰 유지 + 이탈 방지 추가, 카드 클릭 → S-DETAIL 진입 정의, [⋯] 더보기 드롭다운 추가. 데이터 정의 — WHY 고정 옵션(§6.3), Phase/Action 템플릿 규칙(§6.4) + data/PHASE-TEMPLATES.md 추가. 데이터 모델 — 공유 Action MVP 자동 감지 방식 추가(§3.9), WHY depth ON↔OFF 숨김/복원 동작 명시(§3.3). AI Fallback — MVP 고정 옵션 풀 참조 추가(§3.7). HOW 스킵 시 행 숨김 명시(§3.1)*
*v6.2 변경: 성찰 노트 강조 — 전용 성찰 페이지(S-JRNL, /journal) 추가, 헤더 📝 성찰 진입점 추가 (미기록 dot 넛지 포함), 성찰 노트 진입점 2가지(Goal 카드 📝 + 헤더 📝) 정의, 퀵 기록/감정 흐름 차트/통합 타임라인 기능 추가, 화면 목록·사이트맵·네비게이션·URL 구조·MVP 목록·데이터 활용 맵 업데이트*
*v6.1 변경: WHY 깊이 탐색 5 Whys 제한(최대 5단계) 추가 — depth indicator, 도달 안내 메시지, whys 테이블 parent_why_id/depth 컬럼 추가. Goal 세분화 원칙 명시 ("하나의 Goal = 하나의 구체적 활동") — AI 세분화 유도, Action 내부 트리 구조 미도입 원칙*
*v6.0 변경: 트리 뷰 레이어 순서 통일 (WHAT→WHY→HOW), "WHY 기반 트리"→"목표 구조 트리" 명칭 변경, Past→Future 데이터 활용 경로 추가 (인사이트 섹션, Phase 성장 비교, 코칭 메시지 과거 데이터 조건 분기, Goal 완료 시 WHY 기반 추천), 아카이브 탭 정의, 페이스 올리기 동작 정의, Goal 편집/삭제 플로우 추가, Action 추가/편집/삭제 플로우 추가, AI Fallback 정의, profiles 테이블 onboarding_completed 추가, MVP 목록 보강*
*v5.1 변경: 섹션 3~5의 인라인 와이어프레임(ASCII)도 2-WIREFRAMES.md로 완전 분리 — 1-PLAN.md는 텍스트 기능 스펙만 유지, 모든 UI 레이아웃은 2-WIREFRAMES.md 참조*
*v5.0 변경: 화면 설계(섹션 10)를 2-WIREFRAMES.md로 분리 — 1-PLAN.md는 기능 스펙/문서 전담, 2-WIREFRAMES.md는 와이어프레임 전담*
*v4.0 변경: 와이어프레임 통합 — 섹션 10 화면 설계 추가, 누락 화면 신규 작성(S-JOURNAL, S-COMPLETE, S-PHASE, S-CHANGE), S-DETAIL에 성찰 노트/변경 이력 탭 추가, S-CARD에 📝 기록 버튼 추가, S-SET에 WHY 깊이 탐색 토글 추가, 화면 목록(5.1) 업데이트*
*v3.3 변경: Action 공유 구조 도입 (독립 엔티티 + phase_actions N:M), 섹션 번호 정정(8.2→8.3, 8.3→8.4), 4.2절 복수 선택 예시 보완, 온보딩→카드뷰 흐름 명확화, Gemini 명칭 통일, 중요도 표기 통일(🔴/⚪+텍스트), URL 구조 동일경로 분기 설명, P0/P1 우선순위 정의 추가*
*v3.2 변경: WHY depth 선택적 기능으로 변경 (기본 OFF), 진도 표시 Phase 기반으로 변경 (퍼센트는 보조)*
*v3.1 변경: WHY 무제한 깊이 명시, Cross-Goal/코칭 생성방식(하이브리드) 명확화, 온보딩 1개 권장, WHY 노드 내부 확장 UI, Identity 탐구 Phase 2 추가, Gemini 3.0 → Gemini 3 수정*
*v3.0 변경: 성찰 노트, Goal 완료 피드백 추가 / Next.js + Supabase 기술 스택 전환*
*v2.0 변경: Multi-Select, Phase 잠금 제거 → 코칭 시스템, Cross-Goal 매핑 추가*
